# Задание
1 Дописать интерфейс на PuQt для приложенного кода

2 Реализовать возможность поиска каллорийности продуктов по названию или коду

# Реализация и метод работы
Для выполнения работы было использовано руководство "PyQt6 для начинающих" из ДЗкЛК4-1710. В ходе работы был дополнен исходный main.py файл, добавлен интерфейс через PyQt6 для поиска информации о продуктах по названию или коду. Приложение представлено в виде меню с двумя вкладками: 
+ поиск по штрих коду: требуется ввести код продукта для его поиска и нажать **Найти продукт**
+ поиск по названию: требуется ввести название продукта для поиска и нажать **Найти продукты** (Отображает до 100 результатов в одном запросе)

# Техническая реализация
Главный класс - ```Nutrition_window```:
  + Класс Nutrition_window является основным и центральным классом всего приложения, наследуется от базового класса QWidget. В конструкторе класса происходит вызов метода initializeUI, который отвечает за первоначальную настройку всего графического интерфейса. Метод initializeUI устанавливает минимальный размер окна в 800 пикселей по ширине и 600 пикселей по высоте. Также этот метод задает заголовок окна "Поиск калорийности продуктов", который отображается в верхней панели окна, и вызывает метод setUpMainWindow, который непосредственно занимается построением всей структуры интерфейса, после чего отображает окно на экране с помощью метода show.

Класс содержит:
+ Создание системы вкладок ```setUpMainWindow```, метод setUpMainWindow создает основную структуру приложения, начиная с создания виджета вкладок QTabWidget, который служит контейнером для организации интерфейса с переключаемыми страницами. Затем создаются две отдельные вкладки как объекты QWidget: одна для поиска по штрихкоду и другая для поиска по названию. Каждой вкладке присваивается идентификатор "Tabs" через метод setObjectName, что позволяет в дальнейшем применять к ним специфические стили из таблицы стилей. Эти вкладки добавляются в виджет вкладок с соответствующими названиями "Поиск по штрихкоду" и "Поиск по названию", которые отображаются как заголовки вкладок в интерфейсе. После создания вкладок вызываются методы setupBarcodeTab и setupSearchTab, которые наполняют соответствующие вкладки конкретными элементами управления. Завершается построение главного окна созданием основного вертикального макета QVBoxLayout, в который добавляется виджет вкладок, и этот макет устанавливается как основной для всего окна.
+ Вкладка поиска по штрихкоду ```setupBarcodeTab```, метод setupBarcodeTab полностью отвечает за создание и организацию пользовательского интерфейса на вкладке поиска по штрихкоду. Первым элементом создается заголовок с помощью виджета QLabel с текстом "ПОИСК ПРОДУКТА ПО ШТРИХКОДУ", которому присваивается стиль "Header" через setObjectName, что обеспечивает его особое визуальное оформление с зеленым фоном и белым текстом. Далее создается группа элементов QGroupBox с заголовком "Введите штрихкод продукта", которая визуально объединяет связанные элементы в рамку с заголовком. Внутри этой группы создается вертикальный макет QVBoxLayout для упорядочивания элементов. Основным элементом ввода является QLineEdit - однострочное текстовое поле, где пользователь может ввести штрихкод продукта. Этому полю задается placeholder-текст "Например: 8445290140036", который отображается серым цветом когда поле пустое, служа подсказкой для пользователя о формате ожидаемых данных. Под полем ввода размещается кнопка QPushButton с текстом "Найти продукт", которая при нажатии вызывает метод searchByBarcode через механизм сигналов и слотов с помощью clicked.connect. Оба элемента последовательно добавляются в вертикальный макет группы.

  Ниже группы ввода создается вторая группа QGroupBox с заголовком "Информация о продукте", предназначенная для отображения результатов поиска. Внутри этой группы размещается многострочное текстовое поле QTextEdit с именем barcode_result, которое настраивается как доступное только для чтения, чтобы пользователь не мог случайно изменить выводимую информацию. Все эти элементы компоновываются в общий вертикальный макет вкладки, где сначала идет заголовок, затем группа ввода, затем группа результатов, и в конце добавляется растягивающийся элемент addStretch, который занимает все оставшееся пространство и прижимает предыдущие элементы к верхней части окна.
  
+ Обработка поиска по штрихкоду ```searchByBarcode```, метод setupSearchTab создает аналогичную структуру для вкладки поиска по названию, но с некоторыми отличиями в содержании. Заголовок QLabel имеет текст "ПОИСК ПРОДУКТА ПО НАЗВАНИЮ" и тот же стиль "Header". Группа ввода QGroupBox имеет заголовок "Введите название продукта" и содержит текстовое поле QLineEdit с placeholder-текстом "Например: молоко", а также кнопку "Найти продукты", связанную с методом searchByName. Группа результатов также использует QTextEdit с именем search_result для отображения найденных продуктов. Компоновка элементов идентична первой вкладке, что обеспечивает единообразие интерфейса и интуитивную понятность для пользователя.
+ Метод ```searchByBarcode``` обрабатывает событие нажатия кнопки поиска по штрихкоду. Вначале он получает текст из поля ввода штрихкода, убирая лишние пробелы с помощью метода strip. Затем выполняется проверка на пустой ввод - если пользователь не ввел никаких данных, появляется диалоговое окно QMessageBox с предупреждением "Пожалуйста, введите штрихкод", которое предотвращает выполнение бессмысленного запроса к API. Если ввод корректен, метод пытается выполнить запрос к API через функцию get_product_by_barcode, передавая введенный штрихкод. При успешном получении данных извлекается информация о продукте и передается в метод displayProductInfo для форматирования и отображения в текстовом поле результатов. В случае возникновения любой ошибки (неправильный штрихкод, проблемы с сетью и т.д.) в блоке except в поле результатов выводится сообщение об ошибке "Продукт не найден. Проверьте правильность штрихкода".
+ Метод ```searchByName``` аналогичным образом обрабатывает поиск по названию. Он получает поисковый запрос из соответствующего поля ввода, проверяет его на пустоту и в случае проблемы выводит предупреждающее сообщение. При корректном запросе вызывается функция search_products, которая возвращает список продуктов, соответствующих поисковому запросу. Если продукты найдены, метод формирует многострочный текст результата, где каждый продукт отделен визуальными разделителями из знаков равенства, имеет порядковый номер и подробную информацию, сгенерированную методом formatProductInfo. Весь этот форматированный текст устанавливается в поле результатов search_result. Если же продукты не найдены, выводится соответствующее сообщение с предложением изменить запрос.
+ Метод ```formatProductInfo``` является ключевым для представления информации о продукте в читаемом виде. Он принимает словарь с данными о продукте и последовательно формирует строку с информацией, начиная с основных характеристик: названия продукта, бренда, штрихкода, количества и размера порции. Для каждого поля используется безопасное извлечение данных с указанием значения по умолчанию на случай отсутствия информации в API. Затем метод извлекает данные о питательной ценности через функцию extract_kcal и, если такая информация доступна, добавляет раздел "Пищевая ценность" с данными о калориях, белках, жирах и углеводах на 100 грамм продукта. Если дополнительно доступны данные о питательной ценности на порцию, добавляется соответствующий подраздел. При отсутствии данных о питательной ценности выводится информационное сообщение об этом.
+ Метод ```displayProductInfo``` служит оберткой для вывода отформатированной информации в указанный текстовый виджет. Он просто вызывает formatProductInfo для получения форматированного текста и устанавливает этот текст в переданный виджет QTextEdit с помощью метода setText.
+ Таблица стилей ```style_sheet``` определяет визуальное оформление всех элементов интерфейса с использованием CSS-подобного синтаксиса. Стиль QWidget задает белый фон для всех виджетов по умолчанию. Стиль QWidget#Tabs применяется только к виджетам с идентификатором "Tabs" (наши вкладки) и задает им белый фон с закругленными углами. Стиль QLabel#Header определяет оформление заголовков - зеленый фон, белую рамку, закругленные углы, внутренние отступы слева и белый цвет текста. Группы QGroupBox получают жирный шрифт, зеленую рамку с закругленными углами и специальное оформление заголовка с зеленым фоном и белым текстом, позиционируемым по центру верхней части рамки. Поля ввода QLineEdit стилизуются с внутренними отступами, серой рамкой и закругленными углами. Кнопки QPushButton получают зеленый фон, белый текст, внутренние отступы и закругленные углы, а также изменяют цвет при наведении курсора на светло-зеленый и при нажатии возвращаются к основному зеленому. Текстовые поля QTextEdit оформляются с серой рамкой, закругленными углами, внутренними отступами и белым фоном для лучшей читаемости текста.
+ Запуск всего приложения происходит в блоке ```if name == "main"```, где создается экземпляр QApplication - объект, управляющий потоком выполнения и основными настройками приложения. К приложению применяется глобальная таблица стилей через setStyleSheet, затем создается экземпляр главного окна Nutrition_window, и запускается главный цикл обработки событий через app.exec(), который продолжает работать до закрытия приложения, обрабатывая все пользовательские действия и системные события.
+ Так же была незначительно переделана исходная функция ```search_products```, для корректного поиска по названию
